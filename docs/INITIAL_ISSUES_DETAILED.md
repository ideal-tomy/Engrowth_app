# 初期Issue詳細リスト

GitHubで作成する具体的なIssueの内容です。

## Phase 1: 基礎固め

### Issue #1: 単語ページ - 検索機能の強化

**タイトル**: `[Feature] 単語ページの検索機能を強化`

**内容**:
- リアルタイム検索の実装（デバウンス300ms）
- 検索候補の表示
- 検索履歴の保存
- 高度な検索オプション（品詞、グループで絞り込み）

**技術要件**:
- `wordSearchProvider`の改善
- デバウンス処理の実装
- ローカルストレージでの履歴保存

**デザイン要件**:
- 検索バーのUI改善
- 検索候補ドロップダウンのデザイン
- 検索履歴の表示

**関連ドキュメント**: `docs/WORD_PAGE_DESIGN.md`

---

### Issue #2: 単語ページ - フィルタリング機能の追加

**タイトル**: `[Feature] 単語ページにフィルタリング機能を追加`

**内容**:
- 品詞フィルタ（動詞、名詞、形容詞など）
- グループフィルタ（S-001, S-002, Basicなど）
- 学習状況フィルタ（すべて、学習済み、未学習）
- フィルタチップの実装

**技術要件**:
- `filteredWordsProvider`の拡張
- フィルタ状態管理
- 複数フィルタの組み合わせ

**デザイン要件**:
- フィルタチップのデザイン
- フィルタシートのデザイン
- アクティブ状態の視覚的フィードバック

**関連ドキュメント**: `docs/WORD_PAGE_DESIGN.md`

---

### Issue #3: 単語ページ - ソート機能の追加

**タイトル**: `[Feature] 単語ページにソート機能を追加`

**内容**:
- アルファベット順（A-Z, Z-A）
- 追加日順（新着、古い順）
- 学習回数順
- お気に入り順

**技術要件**:
- ソート状態管理
- ソートロジックの実装

**デザイン要件**:
- ソートメニューのデザイン
- ソートアイコンの表示

**関連ドキュメント**: `docs/WORD_PAGE_DESIGN.md`

---

### Issue #4: 単語ページ - カードデザインの改善

**タイトル**: `[UI/UX] 単語カードのデザインを改善`

**内容**:
- グリッド表示の実装
- カードレイアウトの改善
- 画像表示エリアの追加
- アニメーションの追加

**技術要件**:
- `WordCard`ウィジェットのリファクタリング
- グリッド/リスト表示の切替
- 画像表示機能

**デザイン要件**:
- Material Design 3準拠
- カラーパレットの適用
- タイポグラフィの改善

**関連ドキュメント**: `docs/WORD_PAGE_DESIGN.md`, `docs/UI_UX_DESIGN.md`

---

### Issue #5: 例文ページ - カードデザインの改善

**タイトル**: `[UI/UX] 例文カードのデザインを改善`

**内容**:
- カードレイアウトの改善
- カテゴリタグの表示
- シーン設定の表示
- ターゲット単語の表示

**技術要件**:
- `SentenceCard`ウィジェットのリファクタリング
- 新しいフィールドの表示

**デザイン要件**:
- マソンリーレイアウト
- 画像オーバーレイ
- カテゴリタグのデザイン

**関連ドキュメント**: `docs/SENTENCE_PAGE_DESIGN.md`, `docs/UI_UX_DESIGN.md`

---

### Issue #6: 例文ページ - カテゴリフィルタの追加

**タイトル**: `[Feature] 例文ページにカテゴリフィルタを追加`

**内容**:
- カテゴリチップの実装
- 複数カテゴリの選択
- カテゴリ別のフィルタリング

**技術要件**:
- `selectedCategoriesProvider`の実装
- フィルタロジックの実装

**デザイン要件**:
- カテゴリチップのデザイン
- アクティブ状態の表示

**関連ドキュメント**: `docs/SENTENCE_PAGE_DESIGN.md`

---

### Issue #7: 例文ページ - 検索機能の強化

**タイトル**: `[Feature] 例文ページの検索機能を強化`

**内容**:
- 全文検索（英語、日本語）
- タグ検索
- シーン検索
- リアルタイム検索

**技術要件**:
- `sentenceSearchProvider`の改善
- 検索ロジックの拡張

**デザイン要件**:
- 検索バーのUI改善
- 検索候補の表示

**関連ドキュメント**: `docs/SENTENCE_PAGE_DESIGN.md`

---

### Issue #8: Supabase Storage設定

**タイトル**: `[Backend] Supabase Storageの設定とバケット作成`

**内容**:
- `sentences-images`バケットの作成
- `words-images`バケットの作成
- ストレージポリシーの設定
- CORS設定

**技術要件**:
- Supabase Dashboardでの設定
- ストレージポリシーのSQL

**関連ドキュメント**: `docs/IMAGE_IMPLEMENTATION.md`

---

### Issue #9: 画像アップロードサービス実装

**タイトル**: `[Feature] 画像アップロードサービスの実装`

**内容**:
- `ImageUploadService`クラスの実装
- 画像リサイズ機能
- Supabase Storageへのアップロード
- データベース更新

**技術要件**:
- `image`パッケージの追加
- リサイズロジックの実装
- エラーハンドリング

**関連ドキュメント**: `docs/IMAGE_IMPLEMENTATION.md`

---

### Issue #10: 画像表示の改善

**タイトル**: `[UI/UX] 画像表示の改善と最適化`

**内容**:
- 画像キャッシュの最適化
- プレースホルダーの改善
- エラー表示の改善
- 遅延読み込みの実装

**技術要件**:
- `cached_network_image`の設定
- 画像サイズの最適化

**デザイン要件**:
- スケルトンUI
- デフォルト画像

**関連ドキュメント**: `docs/IMAGE_IMPLEMENTATION.md`

---

## Phase 2: UI/UX強化

### Issue #11: 単語ページ - グリッド/リスト表示切替

**タイトル**: `[Feature] 単語ページにグリッド/リスト表示切替を追加`

**内容**:
- 表示モードの切替機能
- グリッド表示の実装
- リスト表示の実装
- アニメーション

**技術要件**:
- `viewModeProvider`の実装
- `GridView`と`ListView`の切替

**デザイン要件**:
- 切替アニメーション
- アイコンの表示

**関連ドキュメント**: `docs/WORD_PAGE_DESIGN.md`

---

### Issue #12: 単語ページ - アニメーション追加

**タイトル**: `[UI/UX] 単語ページにアニメーションを追加`

**内容**:
- カード表示アニメーション
- リスト/グリッド切替アニメーション
- フィルタ変更アニメーション
- マイクロインタラクション

**技術要件**:
- `AnimatedContainer`の使用
- `AnimatedSwitcher`の使用

**デザイン要件**:
- スムーズなトランジション
- 60fpsの維持

**関連ドキュメント**: `docs/WORD_PAGE_DESIGN.md`, `docs/UI_UX_DESIGN.md`

---

### Issue #13: 単語ページ - スワイプジェスチャー

**タイトル**: `[Feature] 単語カードにスワイプジェスチャーを追加`

**内容**:
- 左スワイプ: お気に入り追加
- 右スワイプ: 学習済みマーク
- スワイプアニメーション

**技術要件**:
- `Dismissible`ウィジェットの使用
- ジェスチャー検出

**デザイン要件**:
- スワイプ時の視覚的フィードバック
- アクションアイコンの表示

**関連ドキュメント**: `docs/WORD_PAGE_DESIGN.md`

---

### Issue #14: 例文ページ - 画像オーバーレイ実装

**タイトル**: `[UI/UX] 例文カードに画像オーバーレイを追加`

**内容**:
- グラデーションオーバーレイ
- カテゴリタグの表示
- 難易度バッジの表示

**技術要件**:
- `Stack`ウィジェットの使用
- グラデーションの実装

**デザイン要件**:
- グラデーションのデザイン
- タグとバッジの配置

**関連ドキュメント**: `docs/SENTENCE_PAGE_DESIGN.md`

---

### Issue #15: 例文ページ - 詳細表示モーダル

**タイトル**: `[Feature] 例文詳細表示モーダルの実装`

**内容**:
- モーダル/ボトムシートの実装
- フルサイズ画像表示
- 完全な例文表示
- 関連情報の表示

**技術要件**:
- `showModalBottomSheet`の使用
- 画像の拡大表示

**デザイン要件**:
- モーダルのデザイン
- アニメーション

**関連ドキュメント**: `docs/SENTENCE_PAGE_DESIGN.md`

---

### Issue #16: 例文ページ - アニメーション追加

**タイトル**: `[UI/UX] 例文ページにアニメーションを追加`

**内容**:
- カード表示アニメーション
- 画像フェードイン
- フィルタ変更アニメーション

**技術要件**:
- `AnimatedContainer`の使用
- `FadeInImage`の使用

**デザイン要件**:
- スムーズなトランジション

**関連ドキュメント**: `docs/SENTENCE_PAGE_DESIGN.md`, `docs/UI_UX_DESIGN.md`

---

### Issue #17: 画像リサイズ機能

**タイトル**: `[Feature] 画像リサイズ機能の実装`

**内容**:
- アップロード時の自動リサイズ
- 複数サイズの生成（original, medium, thumbnail）
- 画像最適化

**技術要件**:
- `image`パッケージの使用
- リサイズロジックの実装

**関連ドキュメント**: `docs/IMAGE_IMPLEMENTATION.md`

---

### Issue #18: サムネイル生成

**タイトル**: `[Feature] 画像サムネイル生成機能の実装`

**内容**:
- サムネイルの自動生成
- サムネイルの保存
- サムネイルの表示

**技術要件**:
- リサイズ機能の拡張
- ストレージ構造の設計

**関連ドキュメント**: `docs/IMAGE_IMPLEMENTATION.md`

---

### Issue #19: キャッシュ戦略の実装

**タイトル**: `[Feature] 画像キャッシュ戦略の実装`

**内容**:
- メモリキャッシュの最適化
- ディスクキャッシュの設定
- プリロード戦略

**技術要件**:
- `cached_network_image`の設定
- キャッシュサイズの調整

**関連ドキュメント**: `docs/IMAGE_IMPLEMENTATION.md`

---

## Phase 3: 進捗管理

### Issue #20: 進捗サマリーカード

**タイトル**: `[Feature] 進捗サマリーカードの実装`

**内容**:
- 覚えた/学習中/未学習の表示
- 数値の強調表示
- カードデザイン

**技術要件**:
- `LearningStats`モデルの実装
- 統計計算ロジック

**デザイン要件**:
- 3列グリッドレイアウト
- カラーテーマ

**関連ドキュメント**: `docs/PROGRESS_DESIGN.md`

---

### Issue #21: 進捗バー実装

**タイトル**: `[Feature] 進捗バーの実装`

**内容**:
- 線形プログレスバー
- 進捗率の表示
- アニメーション

**技術要件**:
- `LinearProgressIndicator`のカスタマイズ
- アニメーション実装

**デザイン要件**:
- Material Design 3準拠
- アニメーション

**関連ドキュメント**: `docs/PROGRESS_DESIGN.md`

---

### Issue #22: 学習統計表示

**タイトル**: `[Feature] 学習統計の表示`

**内容**:
- 連続学習日数
- 学習時間の表示
- 平均学習時間

**技術要件**:
- 統計計算ロジック
- データモデルの拡張

**デザイン要件**:
- カードレイアウト
- アイコン表示

**関連ドキュメント**: `docs/PROGRESS_DESIGN.md`

---

### Issue #23: 達成度グラフ

**タイトル**: `[Feature] 達成度グラフの実装`

**内容**:
- 週間グラフ（折れ線）
- 月間グラフ（棒）
- データの可視化

**技術要件**:
- `fl_chart`パッケージの追加
- グラフデータの準備

**デザイン要件**:
- グラフのデザイン
- インタラクティブな要素

**関連ドキュメント**: `docs/PROGRESS_DESIGN.md`

---

### Issue #24: カテゴリ別進捗

**タイトル**: `[Feature] カテゴリ別進捗の表示`

**内容**:
- カテゴリごとの進捗バー
- 進捗率の表示
- フィルタリング

**技術要件**:
- カテゴリ別統計の計算
- 進捗バーの実装

**デザイン要件**:
- リストレイアウト
- 進捗バーのデザイン

**関連ドキュメント**: `docs/PROGRESS_DESIGN.md`

---

### Issue #25: 学習履歴リスト

**タイトル**: `[Feature] 学習履歴リストの実装`

**内容**:
- 日付ごとのグループ化
- 学習した例文の表示
- 詳細情報の表示

**技術要件**:
- 履歴データの取得
- グループ化ロジック

**デザイン要件**:
- リストレイアウト
- 日付ヘッダー

**関連ドキュメント**: `docs/PROGRESS_DESIGN.md`

---

### Issue #26: 学習モード - インテリジェント・ヒント・フェード機能

**タイトル**: `[Feature] インテリジェント・ヒント・フェード機能の実装`

**内容**:
- 2秒（カスタマイズ可能）詰まったらヒントがフェードイン
- 段階的ヒント表示（先頭1文字→先頭3単語→重要単語）
- ヒント使用ログの記録
- 視覚的・触覚的フィードバック

**技術要件**:
- `ThinkingTimer`クラスの実装
- `HintDisplay`ウィジェットの実装
- `HintPhase`enumの定義
- タイマー管理システム
- ヒント使用ログのデータベース保存
- バイブレーション機能（`HapticFeedback`）

**デザイン要件**:
- 段階的フェードインアニメーション（300ms）
- 画面の微かな光る効果
- パルスアニメーション（重要単語）
- スライドインアニメーション
- Material Design 3準拠

**脳科学的根拠**:
- 望ましい困難（Desirable Difficulty）
- 足場かけ（Scaffolding）
- アハ体験とドーパミン放出
- 想起練習（Retrieval Practice）

**関連ドキュメント**: `docs/LEARNING_MODE_DESIGN.md`

---

### Issue #27: 学習モード - ヒント設定画面

**タイトル**: `[Feature] ヒント設定画面の実装`

**内容**:
- ヒント表示までの時間設定（2秒/5秒/10秒/カスタム）
- ヒントの段階設定（3段階/5段階/カスタム）
- ヒントの透明度設定
- バイブレーションON/OFF

**技術要件**:
- `HintSettings`モデルの実装
- 設定の永続化（SharedPreferencesまたはSupabase）
- 設定画面のUI実装

**デザイン要件**:
- シンプルで直感的な設定UI
- スライダーとトグルスイッチ
- プレビュー機能

**関連ドキュメント**: `docs/LEARNING_MODE_DESIGN.md`

---

### Issue #28: 進捗管理 - ヒント使用統計の表示

**タイトル**: `[Feature] ヒント使用統計の表示`

**内容**:
- ヒント使用率の表示
- 段階別ヒント使用回数
- ヒントを使って覚えた例文数
- 平均思考時間

**技術要件**:
- ヒント使用統計の計算ロジック
- グラフ表示（`fl_chart`）
- データベースクエリの最適化

**デザイン要件**:
- 円グラフ（段階別ヒント使用）
- 棒グラフ（ヒント使用率の推移）
- カテゴリ別統計

**関連ドキュメント**: `docs/PROGRESS_DESIGN.md`, `docs/LEARNING_MODE_DESIGN.md`

---

### Issue #29: 学習モード - パーソナライズド復習リスト

**タイトル**: `[Feature] ヒント使用履歴に基づく復習リスト`

**内容**:
- ヒントを使った例文を優先的に復習
- ヒント使用回数に基づく優先順位
- カスタマイズ可能な復習アルゴリズム

**技術要件**:
- ヒント使用統計の取得
- 復習優先度の計算アルゴリズム
- 復習リストの生成

**デザイン要件**:
- 復習リストの表示
- 優先度の視覚的表示
- フィルタリング機能

**関連ドキュメント**: `docs/LEARNING_MODE_DESIGN.md`

---

## Phase 5: 学習体験強化機能

### Issue #30: 習慣化UX（ストリーク/今日のミッション/通知）

**タイトル**: `[Feature] 習慣化UX機能の実装（ストリーク/今日のミッション/通知）`

**内容**:
- 連続学習日数（ストリーク）の表示と更新
- 今日のミッション（1タップ開始）
- 学習リマインド通知（任意ON/OFF）

**技術要件**:
- `user_stats`テーブル追加（`user_id`, `streak_count`, `last_study_date`, `daily_goal_count`, `daily_done_count`, `timezone`, `updated_at`）
- ストリーク算出ロジック（日付跨ぎ判定）
  - `last_study_date == 今日` → ストリーク維持
  - `last_study_date == 昨日` → +1
  - それ以外 → 1にリセット
- `flutter_local_notifications`パッケージ導入
- 通知設定の永続化（SharedPreferencesまたはSupabase）
- `UserStats`モデルの実装
- `userStatsProvider`（FutureProvider）と`userStatsNotifier`の実装
- 学習完了時の`daily_done_count`更新ロジック
- アプリ起動時/学習開始時の日付跨ぎ判定

**デザイン要件**:
- 進捗画面トップにストリークを大きく表示
- 学習タブの最上部に「今日のミッション」カードを固定
- ミッション達成時の小さな演出（チェック + 軽い振動）
- 学習開始CTAは親指で押しやすい位置（画面下寄り）
- ミッション初期案: 例文学習3件、画像想起3件、音読1件（音声機能導入後に解禁）

**関連ドキュメント**: `docs/HABIT_UX_IMPLEMENTATION.md`

---

### Issue #31: 復習最適化（忘却曲線/ヒント使用率）

**タイトル**: `[Feature] 復習最適化機能の実装（忘却曲線/ヒント使用率ベース）`

**内容**:
- 復習リスト自動生成
- ヒント使用率ベースの優先度付け
- 1日の復習枠（今日の復習）

**技術要件**:
- `user_progress`テーブル拡張
  - `last_review_at` (timestamptz)
  - `next_review_at` (timestamptz)
  - `stability` (float) // 記憶安定度
  - `difficulty` (float) // 難易度
  - `review_count` (int)
- 復習優先度ロジック
  ```
  priority = base
  base += (now > next_review_at) ? 3 : 0
  base += (hint_usage_count >= 2) ? 2 : 0
  base += (used_hint_to_master) ? 1 : 0
  base += (average_thinking_time > threshold) ? 1 : 0
  ```
- 復習間隔の算出（簡易SR: Spaced Repetition）
  - 正解 & ヒントなし → 次回 +3日
  - 正解 & ヒントあり → 次回 +1日
  - 不正解 → 次回 +6時間
- `UserProgress`モデルの更新
- 復習キュー生成ロジック（`next_review_at`が過去のものを優先取得、`priority`計算で並び替え）
- 学習完了時の`last_review_at`/`next_review_at`更新ロジック

**デザイン要件**:
- 学習タブの上部に「今日の復習」カード
- 進捗画面に「要復習」セクションを追加
- 復習セッションは通常学習と同じUI/導線で開始
- 「要復習」件数/カテゴリを表示

**関連ドキュメント**: `docs/REVIEW_OPTIMIZATION_IMPLEMENTATION.md`

---

### Issue #32: 音声機能（再生/録音/発話入力）

**タイトル**: `[Feature] 音声機能の実装（再生/録音/発話入力）`

**内容**:
- 例文音声再生（英語/日本語/ゆっくり）
- 録音 → 自分の発話を再生比較
- 発話入力で次へ進む（任意）

**技術要件**:
- `flutter_tts`パッケージ導入（TTS）
  - 速度切替: `0.6 / 1.0`
  - 音声選択: en-US / en-GB
  - 例文テキストを即時再生
- `record`または`flutter_sound`パッケージ導入（録音）
  - 録音ファイルはローカル保存
  - 学習終了時に削除（省容量）
- `speech_to_text`パッケージ導入（音声認識、任意）
  - 正確性は端末依存のため「補助機能」として扱う
  - 成功時のみ軽い成功演出
- iOS/Androidのマイク権限設定
- 再生ロジック（例文テキストからTTS再生、再生中はボタンをローディング表示）
- 録音ロジック（録音開始/停止 → 再生）
- 発話入力ロジック（成功率が一定以上なら「次へ」自動遷移）

**デザイン要件**:
- 学習画面下部に音声操作ボタン配置
- 画像の視認性を損なわない配置
- 推奨配置: 再生ボタン（英語/日本語/ゆっくり）、録音ボタン（押して録音/停止）、再生比較ボタン

**関連ドキュメント**: `docs/AUDIO_SPEAKING_IMPLEMENTATION.md`

---

### Issue #33: シチュエーション連鎖学習（ストーリー型）

**タイトル**: `[Feature] シチュエーション連鎖学習機能の実装（ストーリー型）`

**内容**:
- シーン連鎖ストーリー（例: 空港 → ホテル → レストラン）
- シナリオ単位の進捗管理
- シナリオ完了演出

**技術要件**:
- `scenarios`テーブル追加
  - `id` (uuid)
  - `title` (text)
  - `description` (text)
  - `thumbnail_url` (text)
  - `difficulty` (text)
  - `estimated_minutes` (int)
- `scenario_steps`テーブル追加
  - `id` (uuid)
  - `scenario_id` (uuid)
  - `sentence_id` (uuid)
  - `order_index` (int)
- `user_scenario_progress`テーブル追加
  - `user_id` (uuid)
  - `scenario_id` (uuid)
  - `last_step_index` (int)
  - `completed_at` (timestamptz)
- `Scenario`, `ScenarioStep`, `UserScenarioProgress`モデルの実装
- シナリオ一覧画面の実装（カード型、進捗率表示）
- 学習導線（シナリオ選択 → 学習モードへ遷移、`order_index`で順番に進む）
- 完了判定（最終ステップ学習後に`completed_at`更新）

**デザイン要件**:
- シナリオ一覧はカード型で「所要時間/難易度/進捗率」を表示
- 学習モードはシナリオ内の順序で自動遷移
- 完了時に小さな達成演出（バッジ連動可）
- 進捗が中断/再開で維持される

**関連ドキュメント**: `docs/SCENARIO_CHAIN_IMPLEMENTATION.md`

---

### Issue #34: ゲーミフィケーション（バッジ/称号/演出）

**タイトル**: `[Feature] ゲーミフィケーション機能の実装（バッジ/称号/演出）`

**内容**:
- バッジ/称号システム
- 達成演出（学習完了時）
- ポイント/レベル（段階導入）

**技術要件**:
- `achievements`テーブル追加
  - `id` (uuid)
  - `title` (text)
  - `description` (text)
  - `icon` (text)
  - `condition_type` (text)
  - `condition_value` (int)
- `user_achievements`テーブル追加
  - `user_id` (uuid)
  - `achievement_id` (uuid)
  - `unlocked_at` (timestamptz)
- `Achievement`, `UserAchievement`モデルの実装
- 解除判定ロジック（学習完了時に条件チェック）
  - ストリーク7日
  - 例文50件達成
  - シナリオ3本完了
  - ヒントなし正解10回
- 達成演出のアニメーション実装（解除時に軽いアニメーション/バイブ）

**デザイン要件**:
- 進捗画面に「称号/バッジ」セクション
- 学習完了時に小さな演出（1〜2秒）
- 演出は邪魔にならず、すぐ次へ行ける
- 進捗画面でバッジ一覧が確認できる

**関連ドキュメント**: `docs/GAMIFICATION_IMPLEMENTATION.md`

---

### Issue #35: ナビゲーション/UX洗練（M3/状態保持）

**タイトル**: `[UI/UX] ナビゲーション/UX洗練（Material Design 3/状態保持）`

**内容**:
- M3 `NavigationBar`への統一
- タブ切り替え時の状態保持
- 初期画面の学習優先化

**技術要件**:
- `go_router`の`StatefulShellRoute`採用
  - 各タブのルートをブランチ化
  - タブ遷移で画面がリセットされない
  - Deep Link対応
- `BottomNavigationBar`から`NavigationBar`への置き換え
- 各タブの状態保持（スクロール位置、フィルタ状態）
- 初期画面を`/study`へリダイレクト
- 状態保持確認（タブ切替時にスクロール位置維持）

**デザイン要件**:
- メイン4機能は常時表示
- 親指で届く位置に主要CTA
- タブ切替後もスクロール/フィルタ状態を維持
- Material Design 3準拠の`NavigationBar`デザイン

**関連ドキュメント**: `docs/NAVIGATION_UI_POLISH_IMPLEMENTATION.md`

---

## 使用方法

1. GitHubリポジトリの「Issues」タブを開く
2. 「New issue」をクリック
3. 上記のIssueを1つずつ作成
4. 適切なラベルを付ける
5. 優先度を設定

## 優先順位

### 高優先度（Phase 1）
- Issue #1-10
- Issue #26: インテリジェント・ヒント・フェード機能（最重要）

### 中優先度（Phase 2）
- Issue #11-19
- Issue #27: ヒント設定画面
- Issue #28: ヒント使用統計の表示

### 低優先度（Phase 3）
- Issue #20-25
- Issue #29: パーソナライズド復習リスト