# 音声機能（再生/録音/発話入力）導入手順

## 目的
「聞く・話す」を強化し、シチュエーション学習の実践性を高める。

## 対象機能
- 例文音声の再生（英語/日本語/ゆっくり）
- 録音 → 自分の発話を再生比較
- 発話入力で次へ進む（任意）

## UI/UX要件（スマホ前提）
音声操作は**学習モードの画像上に重ねない**。  
画像の情景が常に見えるよう、操作はカード下部に配置。

推奨配置:
- 再生ボタン（英語/日本語/ゆっくり）
- 録音ボタン（押して録音/停止）
- 再生比較ボタン

## 技術要件
### 1) TTS（Text-to-Speech）
候補: `flutter_tts`
- 速度切替: `0.6 / 1.0`
- 音声選択: en-US / en-GB
- 例文テキストを即時再生

### 2) 音声録音
候補: `record` or `flutter_sound`
- 録音ファイルはローカル保存
- 学習終了時に削除（省容量）

### 3) 音声認識（任意）
候補: `speech_to_text`
- 正確性は端末依存のため「補助機能」として扱う
- 成功時のみ軽い成功演出

## 実装手順
1. **パッケージ導入**
   - `flutter_tts`
   - `record`（録音）
   - `speech_to_text`（任意）
2. **権限設定**
   - iOS/Androidのマイク権限追加
3. **UI追加**
   - 学習画面のボタン行に音声操作を追加
4. **再生ロジック**
   - 例文テキストからTTS再生
   - 再生中はボタンをローディング表示
5. **録音ロジック**
   - 録音開始/停止 → 再生
6. **発話入力（任意）**
   - 成功率が一定以上なら「次へ」自動遷移

## 受け入れ条件
- 英語/日本語/ゆっくり再生が1タップで可能
- 録音して自分の声を再生できる
- 音声UIが画像の視認性を損なわない

