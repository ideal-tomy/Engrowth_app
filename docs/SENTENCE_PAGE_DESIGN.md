# 例文ページ UI/UX設計

## 概要

例文リストページを視覚的に魅力的で学習効果の高いUI/UXに改善します。

## 現在の課題

1. カードデザインがシンプルすぎる
2. 画像表示が基本的
3. カテゴリ表示がない
4. インタラクションが少ない
5. 詳細情報の表示が不足

## デザイン要件

### 1. レイアウト構造

```
┌─────────────────────────────────────┐
│  AppBar (固定)                       │
│  - タイトル                          │
│  - カテゴリフィルタ                  │
│  - 表示切替アイコン                  │
├─────────────────────────────────────┤
│  検索バー (固定)                     │
│  - 例文検索                          │
│  - タグ検索                          │
├─────────────────────────────────────┤
│  カテゴリチップ (スクロール可能)     │
│  [#Business] [#Friends] [#Life]... │
├─────────────────────────────────────┤
│                                     │
│  例文カード (マソンリーレイアウト)  │
│  ┌─────────────────────────────┐  │
│  │ 画像 (16:9)                  │  │
│  ├─────────────────────────────┤  │
│  │ カテゴリタグ                  │  │
│  │ 英語例文 (大きく)             │  │
│  │ 日本語例文 (小さく)           │  │
│  │ シーン設定 (小さく、グレー)   │  │
│  │ [詳細を見る] [学習する]      │  │
│  └─────────────────────────────┘  │
│                                     │
└─────────────────────────────────────┘
```

### 2. 例文カードデザイン

#### カード構造
- **画像エリア**:
  - 16:9のアスペクト比
  - オーバーレイグラデーション
  - カテゴリタグ（左上）
  - 難易度バッジ（右上）

- **コンテンツエリア**:
  - 英語例文（大きく、太字）
  - 日本語例文（中サイズ、グレー）
  - シーン設定（小さく、イタリック）
  - ターゲット単語（チップ形式）

- **アクションエリア**:
  - 詳細ボタン
  - 学習開始ボタン
  - お気に入りボタン

#### カードサイズ
- **高さ**: 400-500px（画像込み）
- **マージン**: 16px
- **角丸**: 16px
- **エレベーション**: 2dp（通常）、8dp（ホバー）

### 3. 画像表示

#### 画像レイアウト
- **アスペクト比**: 16:9
- **高さ**: 200px
- **フィット**: `BoxFit.cover`
- **プレースホルダー**: スケルトンUI
- **エラー表示**: デフォルト画像

#### 画像オーバーレイ
- グラデーション（下から上）
- カテゴリタグ（左上）
- 難易度バッジ（右上）

### 4. カテゴリフィルタ

#### カテゴリチップ
- スクロール可能な横スクロール
- アクティブ状態の視覚的フィードバック
- 複数選択可能

#### カテゴリ一覧
- #Business
- #Friends
- #Life
- #Education
- #Shopping
- #Food
- #Relationship
- #Family
- #Health
- #Travel
- #Event
- #Adventure
- #Society

### 5. 検索機能

#### 検索タイプ
- **全文検索**: 英語例文、日本語例文
- **タグ検索**: カテゴリタグ
- **シーン検索**: シーン設定

#### 検索UI
- リアルタイム検索
- 検索候補表示
- 検索履歴

### 6. 詳細表示

#### モーダル/ボトムシート
- フルサイズ画像
- 完全な例文
- シーン設定の詳細
- ターゲット単語一覧
- 関連例文

### 7. インタラクション

#### カードタップ
- 詳細表示（モーダル/ボトムシート）

#### 長押し
- クイックアクションメニュー
- お気に入り追加
- 学習済みマーク

#### スワイプ
- 左スワイプ: お気に入り追加
- 右スワイプ: 学習開始

## 技術要件

### 1. 状態管理

```dart
// 検索状態
final sentenceSearchProvider = StateProvider<String>((ref) => '');

// カテゴリフィルタ
final selectedCategoriesProvider = StateProvider<List<String>>((ref) => []);

// 難易度フィルタ
final selectedDifficultyProvider = StateProvider<int?>((ref) => null);

// 表示モード
final sentenceViewModeProvider = StateProvider<ViewMode>((ref) => ViewMode.list);
```

### 2. 画像最適化

```dart
// 画像キャッシュ設定
CachedNetworkImage(
  imageUrl: sentence.imageUrl!,
  memCacheWidth: 800, // メモリキャッシュサイズ
  memCacheHeight: 450,
  maxWidthDiskCache: 1200, // ディスクキャッシュサイズ
  maxHeightDiskCache: 675,
  fadeInDuration: Duration(milliseconds: 300),
  placeholderFadeInDuration: Duration(milliseconds: 200),
)
```

### 3. パフォーマンス

- **仮想スクロール**: `ListView.builder`
- **画像遅延読み込み**: `Visibility`ウィジェットで制御
- **デバウンス**: 検索入力を300msデバウンス

### 4. アニメーション

```dart
// カード表示アニメーション
AnimatedContainer(
  duration: Duration(milliseconds: 300),
  curve: Curves.easeOut,
  transform: Matrix4.identity()..scale(1.0),
)

// 画像フェードイン
FadeInImage.assetNetwork(
  placeholder: 'assets/placeholder.png',
  image: sentence.imageUrl!,
  fadeInDuration: Duration(milliseconds: 300),
)
```

## 実装優先順位

### Phase 1: 基本機能強化
1. カードデザインの改善
2. カテゴリフィルタの追加
3. 検索機能の強化

### Phase 2: 画像機能
4. 画像表示の最適化
5. 画像オーバーレイの実装
6. プレースホルダーの改善

### Phase 3: インタラクション
7. 詳細表示モーダル
8. スワイプジェスチャー
9. アニメーション追加

### Phase 4: 高度な機能
10. お気に入り機能
11. 関連例文の表示
12. 学習履歴の統合
