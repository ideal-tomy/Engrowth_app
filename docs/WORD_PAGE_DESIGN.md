# 単語ページ UI/UX設計

## 概要

単語リストページを最高の学習体験を提供するUI/UXに改善します。

## 現在の課題

1. 検索機能が基本的
2. フィルタリング機能が不足
3. 視覚的な階層が不明確
4. インタラクティブな要素が少ない
5. 画像表示がない

## デザイン要件

### 1. レイアウト構造

```
┌─────────────────────────────────────┐
│  AppBar (固定)                       │
│  - タイトル                          │
│  - フィルタアイコン                  │
│  - 表示切替アイコン（グリッド/リスト）│
├─────────────────────────────────────┤
│  検索バー (固定)                     │
│  - リアルタイム検索                  │
│  - 音声入力アイコン                  │
│  - クリアボタン                      │
├─────────────────────────────────────┤
│  フィルタチップ (スクロール可能)     │
│  [すべて] [動詞] [名詞] [形容詞]... │
├─────────────────────────────────────┤
│                                     │
│  単語カード (グリッド/リスト表示)    │
│  ┌─────┐ ┌─────┐ ┌─────┐          │
│  │画像 │ │画像 │ │画像 │          │
│  │単語 │ │単語 │ │単語 │          │
│  │意味 │ │意味 │ │意味 │          │
│  └─────┘ └─────┘ └─────┘          │
│                                     │
└─────────────────────────────────────┘
```

### 2. 単語カードデザイン

#### グリッド表示（デフォルト）
- **サイズ**: 2列グリッド（モバイル）、3列（タブレット）
- **アスペクト比**: 4:3
- **要素**:
  - 画像（上部、16:9）
  - 単語（中央、大きく）
  - 意味（下部、小さく）
  - 品詞バッジ（右上）
  - グループバッジ（左下）

#### リスト表示
- **高さ**: 120px
- **要素**:
  - 画像（左、正方形 100x100）
  - 単語・意味（中央）
  - 品詞・グループ（右）

### 3. インタラクション

#### カードタップ
- 詳細画面への遷移
- リップルエフェクト
- エレベーション変化（2dp → 8dp）

#### 長押し
- コンテキストメニュー表示
- お気に入り追加
- 学習済みマーク

#### スワイプ
- 左スワイプ: お気に入り追加
- 右スワイプ: 学習済みマーク

### 4. 検索機能強化

#### リアルタイム検索
- 入力と同時に結果を更新
- デバウンス（300ms）

#### 検索候補
- 入力中に候補を表示
- 最近の検索履歴
- 人気の検索ワード

#### 高度な検索
- 品詞で絞り込み
- グループで絞り込み
- 学習済み/未学習で絞り込み

### 5. フィルタリング

#### フィルタチップ
- 品詞: 動詞、名詞、形容詞、副詞、前置詞など
- グループ: S-001, S-002, Basicなど
- 学習状況: すべて、学習済み、未学習

#### フィルタシート
- 複数条件の組み合わせ
- リセット機能
- 適用ボタン

### 6. ソート機能

- アルファベット順（A-Z, Z-A）
- 追加日順（新着、古い順）
- 学習回数順
- お気に入り順

### 7. 空状態

#### 検索結果なし
```
┌─────────────────┐
│   🔍            │
│                 │
│ 検索結果が      │
│ 見つかりません  │
│                 │
│ [検索をクリア]  │
└─────────────────┘
```

#### フィルタ結果なし
```
┌─────────────────┐
│   📋            │
│                 │
│ 条件に合う      │
│ 単語がありません│
│                 │
│ [フィルタをリセット]│
└─────────────────┘
```

## 技術要件

### 1. 状態管理

```dart
// 検索状態
final searchQueryProvider = StateProvider<String>((ref) => '');

// フィルタ状態
final selectedPartOfSpeechProvider = StateProvider<String?>((ref) => null);
final selectedGroupProvider = StateProvider<String?>((ref) => null);
final learningStatusProvider = StateProvider<String?>((ref) => null);

// 表示モード
final viewModeProvider = StateProvider<ViewMode>((ref) => ViewMode.grid);

// ソート状態
final sortOrderProvider = StateProvider<SortOrder>((ref) => SortOrder.alphabetical);
```

### 2. パフォーマンス最適化

- **仮想スクロール**: `ListView.builder`を使用
- **画像キャッシュ**: `cached_network_image`で最適化
- **遅延読み込み**: スクロール時に画像を読み込み
- **デバウンス**: 検索入力を300msデバウンス

### 3. アニメーション

```dart
// カード表示アニメーション
AnimatedContainer(
  duration: Duration(milliseconds: 300),
  curve: Curves.easeOut,
  // ...
)

// リスト/グリッド切替アニメーション
AnimatedSwitcher(
  duration: Duration(milliseconds: 300),
  // ...
)
```

### 4. アクセシビリティ

- セマンティックラベル
- キーボードナビゲーション対応
- スクリーンリーダー対応
- コントラスト比4.5:1以上

## 実装優先順位

### Phase 1: 基本機能強化
1. 検索機能の改善（リアルタイム検索、デバウンス）
2. フィルタリング機能の追加
3. ソート機能の追加

### Phase 2: UI改善
4. グリッド/リスト表示切替
5. カードデザインの改善
6. アニメーション追加

### Phase 3: 高度な機能
7. 画像表示機能
8. スワイプジェスチャー
9. お気に入り機能
10. 学習履歴機能
